<!DOCTYPE html>
<html>
<head>
	<title>TWICE - Order</title>

	<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>

<h1>TWICE</h1>

<a href="#" id="link1" onclick="redirectLink();">My Cart</a> <br>

<br>

<form action="submission.html" method="post" onsubmit="return checkInfo();">
	<table>
		<tr>
			<td>First Name:</td>
			<td><input type="text" name="firstName" id="firstName" placeholder="John"></td>
		</tr>

		<tr>
			<td>Last Name:</td>
			<td><input type="text" name="lastName" id="lastName" placeholder="Smith"></td>
		</tr>

		<tr>
			<td>Phone Number:</td>
			<td><input type="tel" name="phone" id="phone" minlength="9" maxlength="14" placeholder="123-456-7890" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"></td>
		</tr>

		<tr>
			<td>Email:</td>
			<td><input type="email" name="emailAddr" id="emailAddr" placeholder="smithjohn@gmail.com"></td>
		</tr>

		<tr>
			<td>Address:</td>
			<td><input type="text" name="address" id="address"></td>
		</tr>

		<tr>
			<td>City</td>
			<td><input type="text" name="city" id="city"></td>
		

		
			<td>State</td>
			<td>
				<select class="stateTax" id="stateTax" onchange="testChange();">
					<option value="AL">AL</option>
					<option value="AK">AK</option>
					<option value="AR">AR</option>	
					<option value="AZ">AZ</option>
					<option value="CA">CA</option>
					<option value="CO">CO</option>
					<option value="CT">CT</option>
					<option value="DE">DE</option>
					<option value="FL">FL</option>
					<option value="GA">GA</option>
					<option value="HI">HI</option>
					<option value="IA">IA</option>	
					<option value="ID">ID</option>
					<option value="IL">IL</option>
					<option value="IN">IN</option>
					<option value="KS">KS</option>
					<option value="KY">KY</option>
					<option value="LA">LA</option>
					<option value="MA">MA</option>
					<option value="MD">MD</option>
					<option value="ME">ME</option>
					<option value="MI">MI</option>
					<option value="MN">MN</option>
					<option value="MO">MO</option>	
					<option value="MS">MS</option>
					<option value="MT">MT</option>
					<option value="NC">NC</option>	
					<option value="NE">NE</option>
					<option value="NH">NH</option>
					<option value="NJ">NJ</option>
					<option value="NM">NM</option>			
					<option value="NV">NV</option>
					<option value="NY">NY</option>
					<option value="ND">ND</option>
					<option value="OH">OH</option>
					<option value="OK">OK</option>
					<option value="OR">OR</option>
					<option value="PA">PA</option>
					<option value="RI">RI</option>
					<option value="SC">SC</option>
					<option value="SD">SD</option>
					<option value="TN">TN</option>
					<option value="TX">TX</option>
					<option value="UT">UT</option>
					<option value="VT">VT</option>
					<option value="VA">VA</option>
					<option value="WA">WA</option>
					<option value="WI">WI</option>	
					<option value="WV">WV</option>
					<option value="WY">WY</option>

				</select>
			</td>
		</tr>

		<tr>
			<td> Zip Code </td>
			<td><input type="text" name="zipCode" id="zipCode" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57" maxlength="6"></td>
		</tr>

	</table>

	<br>

	<table>
		<tr>
			<td>Card:</td>
			<td>
				<select>
					<option value="Mastercard">Mastercard</option>
					<option value="Visa">Visa</option>
					<option value="American Express">American Express</option>
					<option value="Discover">Discover</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>Card Number:</td>
			<td><input type="text" name="cardNumber" id="cardNumber" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57" maxlength="16"></td>
		</tr>

		<tr>
			<td>CCV:</td>
			<td><input type="text" name="cardCCV" id="cardCCV" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57" maxlength="4"></td>
		</tr>

		<tr>
			<td>Expiration:</td>
			<td>
				<select id="month">
					<option value="01">01</option>
					<option value="02">02</option>
					<option value="03">03</option>
					<option value="04">04</option>
					<option value="05">05</option>
					<option value="06">06</option>
					<option value="07">07</option>
					<option value="08">08</option>
					<option value="09">09</option>
					<option value="10">10</option>
					<option value="11">11</option>
					<option value="12">12</option>
				</select>

				<select id="year">
					<option value="2018">2018</option>
					<option value="2019">2019</option>
					<option value="2020">2020</option>
					<option value="2021">2021</option>
					<option value="2022">2022</option>
					<option value="2023">2023</option>
					<option value="2024">2024</option>
					<option value="2025">2025</option>
					<option value="2026">2026</option>
					<option value="2027">2027</option>
					<option value="2028">2028</option>
					<option value="2029">2029</option>
					<option value="2030">2030</option>
				</select>
			</td>
		</tr>
	</table>

	<br>

	<table>
		<tr>
			<td width="100px"><strong>Total:</strong> </td>
			<td>$<span id="total-cart"></span></td>
		</tr>

		<tr>
			<td><strong>Tax:</strong> </td>
			<td>$<span id="tax-cart"></span></td>
		</tr>

		<tr>
			<td><strong>Shipping:</strong> </td>
			<td>$<span id="shipping-cart"></span></td>
		</tr>

		<tr>
			<td><strong>Total:</strong> </td>
			<td>$<span id="totalAll-cart" onchange="calcTax()"></span></td>
		</tr>
	</table>

	<br> <input type="submit" value="Submit">
</form>

<script src="shoppingCart.js"></script>

<script>
	
	var totalValue = parseFloat(shoppingCart.totalCart()) + parseFloat(shoppingCart.shippingPrice()) + parseFloat(calcTax());

	$("#total-cart").html(shoppingCart.totalCart());
	
	$("#shipping-cart").html(shoppingCart.shippingPrice());
	$("#totalAll-cart").html(totalValue.toFixed(2));

	function redirectLink()
	{
		if(confirm("Are you sure you want to leave the current page? \nAll information will reset when you leave this page."))
		{
			document.getElementById("link1").href = "cart.html";
			return true;
		}
		else
		{
			return false;
		}
	}

	function calcTax()
	{
		
		var currentState = document.getElementById("stateTax").value;
		var taxPercent;
		var totalCost = shoppingCart.totalCart();


		switch (currentState)
		{
			case "AL":
				taxPercent = 9.10;
				break;
			case "AK":
				taxPercent = 1.76;
				break;
			case "AR":
				taxPercent = 9.41;
				break;
			case "AZ":
				taxPercent = 8.33;
				break;
			case "CA":
				taxPercent = 8.54;
				break;
			case "CO":
				taxPercent = 7.52;
				break;
			case "CT":
				taxPercent = 6.35;
				break;
			case "DE":
				taxPercent = 0;
				break;
			case "FL":
				taxPercent = 6.80;
				break;
			case "GA":
				taxPercent = 7.15;
				break;
			case "HI":
				taxPercent = 4.35;
				break;
			case "IA":
				taxPercent = 6.80;
				break;
			case "ID":
				taxPercent = 6.03;
				break;
			case "IL":
				taxPercent = 8.70;
				break;
			case "IN":
				taxPercent = 7.00;
				break;
			case "KS":
				taxPercent = 8.68;
				break;
			case "KY":
				taxPercent = 6.00;
				break;
			case "LA":
				taxPercent = 10.02;
				break;
			case "MA":
				taxPercent = 6.25;
				break;
			case "MD":
				taxPercent = 6.00;
				break;
			case "ME":
				taxPercent = 5.50;
				break;
			case "MI":
				taxPercent = 6.00;
				break;
			case "MN":
				taxPercent = 7.42;
				break;
			case "MO":
				taxPercent = 8.03;
				break;
			case "MS":
				taxPercent = 7.07;
				break;
			case "MT":
				taxPercent = 0;
				break;
			case "NC":
				taxPercent = 6.95;
				break;
			case "NE":
				taxPercent = 6.89;
				break;
			case "NH":
				taxPercent = 0;
				break;
			case "NJ":
				taxPercent = 6.60;
				break;
			case "NM":
				taxPercent = 7.66;
				break;
			case "NV":
				taxPercent = 8.14;
				break;
			case "NY":
				taxPercent = 8.49;
				break;
			case "ND":
				taxPercent = 6.80;
				break;
			case "OH":
				taxPercent = 7.15;
				break;
			case "OK":
				taxPercent = 8.91;
				break;
			case "OR":
				taxPercent = 0;
				break;
			case "PA":
				taxPercent = 6.34;
				break;
			case "RI":
				taxPercent = 7.00;
				break;
			case "SC":
				taxPercent = 7.37;
				break;
			case "SD":
				taxPercent = 6.40;
				break;
			case "TN":
				taxPercent = 9.46;
				break;
			case "TX":
				taxPercent = 8.17;
				break;
			case "UT":
				taxPercent = 6.77;
				break;
			case "VT":
				taxPercent = 6.18;
				break;
			case "VA":
				taxPercent = 5.63;
				break;
			case "WA":
				taxPercent = 9.18;
				break;
			case "WI":
				taxPercent = 5.42;
				break;
			case "WV":
				taxPercent = 6.37;
				break;	
			case "WY":
				taxPercent = 5.46;
				break;																																																
			default:
				taxPercent = 0;
				break;
		}


		var tempAdd = (totalCost * taxPercent) / 100;
		
		$("#tax-cart").html(tempAdd.toFixed(2));

		return tempAdd.toFixed(2);

	}

	function calcTotal()
	{
		var totalValue = parseFloat(shoppingCart.totalCart()) + parseFloat(shoppingCart.shippingPrice()) + parseFloat(calcTax());
		$("#totalAll-cart").html(totalValue.toFixed(2));
	}

	function testChange()
	{
		calcTax();
		calcTotal();
	}


	function checkInfo()
	{
		var firstName = document.getElementById("firstName").value;
		var lastName = document.getElementById("lastName").value;
		var phone = document.getElementById("phone").value;
		var emailAddr = document.getElementById("emailAddr").value;
		var address = document.getElementById("address").value;
		var city = document.getElementById("city").value;
		var month = document.getElementById("month").value;
		var year = document.getElementById("year").value;

		var d = new Date();

		if (firstName == "" || lastName == "" || phone == "" || emailAddr == "" || address == "" || city == "" || zipCode == ""
			|| cardNumber == "" || cardCCV == "")
		{
			alert("Please fill in all fields.");
			return false;
		}
		else if (d.getMonth() + 1 > month && d.getFullYear() >= year)
		{
			alert("ERROR: Card has expired. Please check your card information again.");
			return false;
		}
		else
		{
			if (confirm("Confirm Order?"))
			{
				return true;
			}
			else
			{
				return false;
			}
		}
	}

</script>

</body>
</html>